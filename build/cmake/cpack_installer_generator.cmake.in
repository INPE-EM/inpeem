set(CPACK_PACKAGE_NAME @PROJECT_NAME@)
set(CPACK_PACKAGE_VERSION @INPEEM_VERSION@)
set(CPACK_PACKAGE_VENDOR "CCST/INPE")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "@PROJECT_NAME@ Application")
set(CPACK_PACKAGE_VERSION_MAJOR @INPEEM_VERSION_MAJOR@)
set(CPACK_PACKAGE_VERSION_MINOR @INPEEM_VERSION_MINOR@)
set(CPACK_PACKAGE_VERSION_PATCH @INPEEM_VERSION_PATCH@)

set(CPACK_RESOURCE_FILE_LICENSE @INPEEM_ROOT_DIR@/LICENSE)

if(NOT DEFINED CPACK_SOURCE_PACKAGE_FILE_NAME)
	set(CPACK_PACKAGE_FILE_NAME "@PROJECT_NAME@-@INPEEM_VERSION@")
endif()

set(CPACK_OUTPUT_FILE_PREFIX installer)

#
# specific configuration for NSIS package generator
#
if(CPACK_GENERATOR MATCHES "NSIS")
	set(CPACK_NSIS_MUI_ICON @INPEEM_RESOURCES_DIR@\\\\icon.ico)
	set(CPACK_NSIS_MUI_UNIICON @INPEEM_RESOURCES_DIR@\\\\icon.ico)
	set(CPACK_NSIS_INSTALLED_ICON_NAME "icon.ico")
	set(CPACK_PACKAGE_ICON @INPEEM_RESOURCES_DIR@\\\\icon.ico)
	set(CPACK_RESOURCE_FILE_README @INPEEM_ROOT_DIR@/LICENSE)
	set(CPACK_PACKAGE_INSTALL_DIRECTORY @PROJECT_NAME@)
	set(CPACK_CREATE_DESKTOP_LINKS @PROJECT_NAME@)
	set(CPACK_NSIS_PACKAGE_NAME "@PROJECT_NAME@")
	set(CPACK_NSIS_DISPLAY_NAME "@PROJECT_NAME@ @INPEEM_VERSION@")
	set(CPACK_NSIS_HELP_LINK "http://inpe-em.ccst.inpe.br")
	set(CPACK_NSIS_URL_INFO_ABOUT "http://inpe-em.ccst.inpe.br/")
	set(CPACK_NSIS_CONTACT "luccme.cocst@inpe.br") #TODO
	set(CPACK_NSIS_INSTALL_ROOT "C:")
	set(CPACK_NSIS_PACKAGE_NAME "@PROJECT_NAME@")
	set(CPACK_NSIS_ENABLE_UNINSTALL_BEFORE_INSTALL "ON")
	# To overwrite a previous installed version
	set(CPACK_PACKAGE_INSTALL_REGISTRY_KEY @PROJECT_NAME@)
	set(shortCutName "@PROJECT_NAME@")
	set(CPACK_PACKAGE_EXECUTABLES "@PROJECT_NAME@;${shortCutName}")

	list(APPEND CPACK_NSIS_CREATE_ICONS_EXTRA
		# "SetOutPath '\$INSTDIR\\\\bin'" #TODO: REVIEW
		"
		CreateShortCut \"$DESKTOP\\${shortCutName}.lnk\" \"$INSTDIR\\@PROJECT_NAME@.exe\";
		CreateShortCut \"$SMPROGRAMS\\$STARTMENU_FOLDER\\${shortCutName}.lnk\" \"$INSTDIR\\@PROJECT_NAME@.exe\"
		"
	)

	list(APPEND CPACK_NSIS_DELETE_ICONS_EXTRA
		# "Delete '\$SMPROGRAMS\\\\$MUI_TEMP\\\\${shortCutName}.lnk'" # TODO: REVIEW
		"
		Delete \"$DESKTOP\\${shortCutName}.lnk\";
		Delete \"$SMPROGRAMS\\$STARTMENU_FOLDER\\${shortCutName}.lnk\"
		"
	)
endif()
